{"version":3,"file":"send.js","sourceRoot":"","sources":["../src/send.ts"],"names":[],"mappings":";;;;;;AAEA,mDAAgD;AAChD,+EAA4E;AAE5E,8DAAgC;AAuBhC;;;;;;;;;;GAUG;AACH,SAAgB,IAAI,CAClB,WAA6B,EAC7B,OAAe;IAEf,MAAM,OAAO,GAAG,IAAA,yDAA2B,EAAC,WAAW,CAAC,CAAC;IAEzD,MAAM,QAAQ,GAA2B,IAAA,qBAAK,EAC5C,GAAG,OAAO,cAAc,EACxB,OAAO,CACR,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,IAAA,6BAAa,EAAC,CAAC,CAAC,CAAC,CAAC;IAEhC,OAAO,QAAQ,CAAC;AAClB,CAAC;AAZD,oBAYC","sourcesContent":["import type { Base16String, ICommand } from '@kadena/types';\n\nimport { parseResponse } from './parseResponse';\nimport { stringifyAndMakePOSTRequest } from './stringifyAndMakePOSTRequest';\n\nimport fetch from 'cross-fetch';\n\n/**\n * Request type of /send endpoint.\n *\n * @param cmds - Non-empty array of Pact commands (or transactions) to submit to server.\n * @alpha\n */\nexport interface ISendRequestBody {\n  cmds: Array<ICommand>;\n}\n\n/**\n * Response type of /send endpoint.\n *\n * @param requestKeys - List of request keys (or command hashes) of the transactions submitted.\n *                      Can be sent to /poll and /listen to retrieve transaction results.\n * @alpha\n */\nexport interface ISendResponse {\n  requestKeys: Array<Base16String>;\n}\n\n/**\n * Asynchronous submission of one or more public (unencrypted) commands to the blockchain for execution.\n *\n * Corresponds to `fetchSendRaw` and `fetchSend` functions:\n * https://github.com/kadena-io/pact-lang-api/blob/master/pact-lang-api.js#L601\n * https://github.com/kadena-io/pact-lang-api/blob/master/pact-lang-api.js#L589\n *\n * @param requestBody - Non-empty array of Pact commands to submit to server.\n * @param apiHost - API host running a Pact-enabled server.\n * @alpha\n */\nexport function send(\n  requestBody: ISendRequestBody,\n  apiHost: string,\n): Promise<ISendResponse> {\n  const request = stringifyAndMakePOSTRequest(requestBody);\n\n  const response: Promise<ISendResponse> = fetch(\n    `${apiHost}/api/v1/send`,\n    request,\n  ).then((r) => parseResponse(r));\n\n  return response;\n}\n"]}