"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildUnsignedTransaction = void 0;
const buildCommandFromTemplate_1 = require("./buildCommandFromTemplate");
const pact_1 = require("./pact");
const debug_1 = __importDefault(require("debug"));
const yaml_1 = require("yaml");
const debug = (0, debug_1.default)('client:buildUnsignedTransaction');
/**
 * @internal
 */
function buildUnsignedTransaction(parts, holes, args) {
    const filledTemplate = (0, buildCommandFromTemplate_1.buildCommandFromTemplate)(parts, holes, args);
    const payload = (0, yaml_1.parse)(filledTemplate);
    try {
        const commandBuilder = (0, pact_1.createPactCommandFromTemplate)(payload);
        debug('CommandBuilder generated from template', commandBuilder);
        return commandBuilder;
    }
    catch (e) {
        throw new Error(`An error occurred when parsing the filled template.
    ! Please check your template and make sure there aren't any syntax errors.
    The values:
    ${JSON.stringify(args)}

    Error: ${e}`);
    }
}
exports.buildUnsignedTransaction = buildUnsignedTransaction;
//# sourceMappingURL=buildUnsignedTransaction.js.map